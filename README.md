# üöÄ Selectel Vacancies API

FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π Selectel, —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ PostgreSQL –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è CRUD-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

![FastAPI](https://img.shields.io/badge/FastAPI-0.129.0-009688?logo=fastapi)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-336791?logo=postgresql)
![Docker](https://img.shields.io/badge/Docker-ready-2496ED?logo=docker)

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-docker)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)
- [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è-api)
- [API Endpoints](#api-endpoints)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ó–∞–ø—É—Å–∫ –±–µ–∑ Docker](#–∑–∞–ø—É—Å–∫-–±–µ–∑-docker)
- [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker](#–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã-docker)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–≤–æ–∑–º–æ–∂–Ω—ã—Ö-–ø—Ä–æ–±–ª–µ–º)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ **–ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–∫–∞–Ω—Å–∏–π** —Å –ø—É–±–ª–∏—á–Ω–æ–≥–æ API Selectel (–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)
- üìã **CRUD API** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏—è–º–∏
- üîç **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** —Å–ø–∏—Å–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É –∏ –≥—Ä–∞—Ñ–∏–∫—É —Ä–∞–±–æ—Ç—ã
- üíæ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π upsert** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π, —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö
- ‚è± **–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5 –º–∏–Ω—É—Ç)
- üê≥ **–ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose** –¥–ª—è –ª—ë–≥–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                                                                 |
|--------------------|-----------------------------------------------------------------------------|
| **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫**  | FastAPI                                                                     |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**    | PostgreSQL + asyncpg                                                        |
| **ORM**            | SQLAlchemy 2.0 (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º)                                          |
| **–ú–∏–≥—Ä–∞—Ü–∏–∏**       | Alembic                                                                     |
| **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**    | APScheduler                                                                 |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è**      | Pydantic / Pydantic Settings                                                |
| **HTTP-–∫–ª–∏–µ–Ω—Ç**    | HTTPX                                                                       |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**| Docker, Docker Compose                                                      |

---

## üö¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 2.0+

### –ó–∞–ø—É—Å–∫

```bash
docker-compose up --build
```

Swagger UI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8000/docs
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|-------|----------|----------|---------------------|
| POST | `/api/v1/vacancies/` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏ —Å `external_id=999999` | 201 Created, –æ–±—ä–µ–∫—Ç —Å `id=27` |
| POST | `/api/v1/vacancies/` | –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å —Ç–µ–º –∂–µ `external_id` | 200 OK, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤–∞–∫–∞–Ω—Å–∏—è (`id=27`) |
| GET | `/api/v1/vacancies/?city=–ú–æ—Å–∫–≤–∞&timetable_mode_name=–ì–∏–±–∫–∏–π` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥—É –∏ —Ä–µ–∂–∏–º—É | 200 OK, –ø–æ–ª—É—á–µ–Ω—ã 2 –≤–∞–∫–∞–Ω—Å–∏–∏ |
| GET | `/api/v1/vacancies/{id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ id (`id=27`) | 200 OK, –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| PUT | `/api/v1/vacancies/{id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `title` | 200 OK, –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã |
| DELETE | `/api/v1/vacancies/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ | 204 No Content, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π GET –¥–∞—ë—Ç 404 |

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π:

| –ú–µ—Ç–æ–¥ | URL | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------|-----|-----------|
| POST | `/api/v1/vacancies/` | 201 Created ‚Äî –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ |
| POST (duplicate) | `/api/v1/vacancies/` | 200 OK ‚Äî –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å |
| GET (filter) | `/api/v1/vacancies/?city=–ú–æ—Å–∫–≤–∞&timetable_mode_name=–ì–∏–±–∫–∏–π` | 200 OK ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| GET by id | `/api/v1/vacancies/27` | 200 OK ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã |
| PUT | `/api/v1/vacancies/27` | 200 OK ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ |
| DELETE | `/api/v1/vacancies/27` | 204 No Content ‚Äî —É–¥–∞–ª–µ–Ω–æ, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π GET ‚Üí 404 |

---

## üì° API Endpoints

| –ú–µ—Ç–æ–¥   | URL                            | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
|---------|--------------------------------|-------------------------------------------------------|
| `GET`   | `/api/v1/vacancies/`           | –°–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `timetable_mode_name` –∏ `city`) |
| `GET`   | `/api/v1/vacancies/{id}`       | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞–∫–∞–Ω—Å–∏–∏                      |
| `POST`  | `/api/v1/vacancies/`           | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏                              |
| `PUT`   | `/api/v1/vacancies/{id}`       | –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏                           |
| `DELETE`| `/api/v1/vacancies/{id}`       | –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏                                    |
| `POST`  | `/api/v1/parse/`               | –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞                               |

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –û–ø–∏—Å–∞–Ω–∏–µ                                  | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|--------------------------|--------------------------------------------|--------------|
| `DATABASE_URL`           | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL           | postgres://... |
| `LOG_LEVEL`              | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è                        | INFO         |
| `PARSE_SCHEDULE_MINUTES` | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)    | 5            |

---

## üíª –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
pip install -r requirements.txt
alembic upgrade head
uvicorn app.main:app --reload
```

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker

```bash
docker-compose up -d
docker-compose down
docker-compose logs -f app
docker-compose exec db psql -U postgres -d postgres
```
